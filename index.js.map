{"version":3,"file":"index.js","sources":["index.es"],"names":["TIMEOUT","g","window","d","document","id","el","type","createElement","cache","url","cb","fn","b","body","s","cached","timer","undefined","err","apply","concat","args","Array","_len","_key","arguments","clearTimeout","removeChild","setTimeout","λ","src","replace","appendChild"],"mappings":"mNAAA,IAAMA,GAAU,IAEZC,EAAIC,OACPC,EAAIF,EAAEG,SACNC,EAAK,EACLC,EAAK,SAAAC,SAAQJ,GAAEK,cAAcD,IAC7BE,kBAEc,SAACC,EAAKC,GACpB,GAAIC,GAAE,YAAcP,EACnBQ,EAAIV,EAAEW,MAAQR,EAAG,QACjBS,EAAIT,EAAG,UACPU,EAASP,EAAMC,GACfO,EAAKC,OAAEC,EAAGD,MACX,OAAIF,GAAeL,EAAES,MAAAF,QAAC,MAAIG,OAAKL,KAC/Bf,EAAEW,GAAM,sCAAIU,EAAIC,MAAAC,GAAAC,EAAA,EAAAD,EAAAC,EAAAA,IAAJH,EAAIG,GAAAC,UAAAD,EACfE,cAAaV,GACRN,IACLF,EAAMC,GAAOY,EACbX,EAAES,MAAAF,QAACC,GAAGE,OAAKC,IACXT,EAAEe,YAAYb,GACdA,EAAIJ,EAAKV,EAAEW,GAAM,WACVX,GAAEW,KAEVK,EAAQY,WAAY,SAAAC,GACnBX,EAAM,YACNlB,EAAEW,MACAZ,GACHe,EAAEgB,IAAMrB,EAAIsB,QAAQ,sBAAuBpB,OAC3CC,GAAEoB,YAAYlB;;;;;;;;;;;;;;;AA7Bf,KAAM,OAAO,GAAG,KAAK,CAAC;;AAEtB,KAAI,CAAC,GAAG,MAAM;KACb,CAAC,GAAG,CAAC,CAAC,QAAQ;KACd,EAAE,GAAG,CAAC;KACN,EAAE,GAAG,SAAL,EAAE,CAAG,IAAI;SAAI,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC;EAAA;KAClC,KAAK,GAAG,EAAE,CAAC;;sBAEG,UAAC,GAAG,EAAE,EAAE,EAAK;AAC3B,MAAI,EAAE,cAAY,EAAE,EAAE,AAAE;MACvB,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,MAAM,CAAC;MACxB,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC;MAChB,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC;MACnB,KAAK,YAAA;MAAE,GAAG,YAAA,CAAC;AACZ,MAAI,MAAM,EAAE,OAAO,EAAE,mBAAC,IAAI,SAAK,MAAM,EAAC,CAAC;AACvC,GAAC,CAAC,EAAE,CAAC,GAAG,YAAa;qCAAT,IAAI;AAAJ,QAAI;;;AACf,eAAY,CAAC,KAAK,CAAC,CAAC;AACpB,OAAI,CAAC,EAAE,EAAE,OAAO;AAChB,QAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;AAClB,KAAE,mBAAC,GAAG,SAAK,IAAI,EAAC,CAAC;AACjB,IAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AACjB,IAAC,GAAG,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AACtB,UAAO,CAAC,CAAC,EAAE,CAAC,CAAC;GACb,CAAC;AACF,OAAK,GAAG,UAAU,CAAE,UAAA,CAAC,EAAI;AACxB,MAAG,GAAG,WAAW,CAAC;AAClB,IAAC,CAAC,EAAE,CAAC,EAAE,CAAC;GACR,EAAE,OAAO,CAAC,CAAC;AACZ,GAAC,CAAC,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC,CAAC;AAC/C,GAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;EACjB","sourcesContent":["const TIMEOUT = 10000;\n\nlet g = window,\n\td = g.document,\n\tid = 0,\n\tel = type => d.createElement(type),\n\tcache = {};\n\nexport default (url, cb) => {\n\tlet fn = `jsonp_${++id}`,\n\t\tb = d.body || el('body'),\n\t\ts = el('script'),\n\t\tcached = cache[url],\n\t\ttimer, err;\n\tif (cached) return cb(null, ...cached);\n\tg[fn] = (...args) => {\n\t\tclearTimeout(timer);\n\t\tif (!cb) return;\n\t\tcache[url] = args;\n\t\tcb(err, ...args);\n\t\tb.removeChild(s);\n\t\ts = cb = g[fn] = null;\n\t\tdelete g[fn];\n\t};\n\ttimer = setTimeout( λ => {\n\t\terr = 'Timed out';\n\t\tg[fn]();\n\t}, TIMEOUT);\n\ts.src = url.replace(/\\{\\{?callback\\}\\}?/i, fn);\n\tb.appendChild(s);\n};\n"]}